{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport axios from \"axios\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loader = document.querySelector('.loader');\n\nexport async function getPicture(query, currentPage) {\n  loader.style.display = \"block\";\n\n\n  const BASE_URL = 'https://pixabay.com/api/';\n    const params = new URLSearchParams({\n      key: '43034088-8742da6bcfba06a1e287112c2',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: currentPage,\n  });\n    \n    const url = `${BASE_URL}?${params}`;\n\n  const res = await axios.get(url);\n      loader.style.display = \"none\";\n      if (res.data.totalHits > 0) {        \n        return res.data;\n      }\n      else {\n        iziToast.show({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            timeout: 5000,\n            position: \"topRight\",\n            color: 'red'\n        })\n        return res.data;\n      }      \n}\n\n","\nfunction photoTemplate({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `<li class=\"picture-card\">\n  <a class=\"sourse\" href ='${largeImageURL}'>\n  <img\n    src='${webformatURL}'\n    alt= '${tags}'\n    class=\"photo-item\"    \n  />\n  </a>  \n <ul class=\"discription\">\n   <li>Likes:<br>${likes}</li>\n   <li>Vives:<br>${views}</li>\n   <li>Comments:<br>${comments}</li>\n   <li>Downloads:<br>${downloads}</li>\n </ul>\n</li>`;\n}\n\nexport function photosTemplate(arr) {\n    return arr.map(photoTemplate).join(' ');    \n}","import { getPicture } from './js/pixabay-api'\nimport { photosTemplate } from './js/render-functions'\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst formRef = document.querySelector(\".search\");\nconst resultRef = document.querySelector(\".result\");\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\n\nlet page = 1;\nlet maxPage = 0;\nlet pageSize = 15;\nlet inputValue;\n\n\nloader.style.display = \"none\";\n\nformRef.addEventListener('submit', createSearch);\nloadMore.addEventListener('click', onLoadMoreClick);\n\nasync function createSearch(e) {\n    e.preventDefault();\n    \n    resultRef.innerHTML = \"\";\n\n    page = 1;\n\n  inputValue = formRef.elements.input.value.trim();\n    if (inputValue) {\n        try {\n            const data = await getPicture(inputValue, page);\n          maxPage = Math.ceil(data.totalHits / pageSize);\n            const markup = photosTemplate(data.hits);\n            resultRef.innerHTML = markup;\n            const gallery = new SimpleLightbox('.result li a');\n            gallery.refresh();            \n        } catch (err) {\n            console.log(err);\n             iziToast.show({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            timeout: 5000,\n            position: \"topRight\",\n            color: 'red'\n        })\n        }  \n  }\n\n  formRef.reset();\n  checkBtnStatus();\n      \n}\n\nasync function onLoadMoreClick() {\n\n  page += 1;\n    try {\n        const data = await getPicture(inputValue, page);\n        const markup = photosTemplate(data.hits);\n      resultRef.insertAdjacentHTML('beforeend', markup);\n      const gallery = new SimpleLightbox('.result li a');\n            gallery.refresh();   \n  } catch (err) {\n    console.log(err);\n  }\n\n  myScroll();\n  \n  checkBtnStatus();\n  message();\n}\n\n\n\nfunction checkBtnStatus() {\n  if (page >= maxPage) {\n      loadMore.style.display = 'none';       \n  } else {\n      loadMore.style.display = 'block';\n  }\n}\n\nfunction message() {\n  if (page >= maxPage) {\n    iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            timeout: 5000,\n            position: \"topRight\",\n            color: 'green',\n       })    \n  }\n}\n\nfunction myScroll() {\n  const height = resultRef.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height*2,\n    behavior: 'smooth',\n  });\n}"],"names":["loader","getPicture","query","currentPage","BASE_URL","params","url","res","axios","iziToast","photoTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","photosTemplate","arr","formRef","resultRef","loadMore","page","maxPage","pageSize","inputValue","createSearch","onLoadMoreClick","e","data","markup","SimpleLightbox","err","checkBtnStatus","myScroll","message","height"],"mappings":"owBAIA,MAAMA,EAAS,SAAS,cAAc,SAAS,EAExC,eAAeC,EAAWC,EAAOC,EAAa,CACnDH,EAAO,MAAM,QAAU,QAGvB,MAAMI,EAAW,2BACTC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACZ,CAAG,EAEOG,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GAE7BE,EAAM,MAAMC,EAAM,IAAIF,CAAG,EAE3B,OADAN,EAAO,MAAM,QAAU,OACnBO,EAAI,KAAK,UAAY,GAIvBE,EAAS,KAAK,CACV,QAAS,2EACT,QAAS,IACT,SAAU,WACV,MAAO,KACnB,CAAS,EACMF,EAAI,IAEnB,CCpCA,SAASG,EAAc,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CAC7F,MAAO;AAAA,6BACkBL,CAAa;AAAA;AAAA,WAE/BD,CAAY;AAAA,YACXE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKGC,CAAK;AAAA,mBACLC,CAAK;AAAA,sBACFC,CAAQ;AAAA,uBACPC,CAAS;AAAA;AAAA,MAGhC,CAEO,SAASC,EAAeC,EAAK,CAChC,OAAOA,EAAI,IAAIT,CAAa,EAAE,KAAK,GAAG,CAC1C,CCZA,MAAMU,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAY,SAAS,cAAc,SAAS,EAC5CrB,EAAS,SAAS,cAAc,SAAS,EACzCsB,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIC,EAAO,EACPC,EAAU,EACVC,EAAW,GACXC,EAGJ1B,EAAO,MAAM,QAAU,OAEvBoB,EAAQ,iBAAiB,SAAUO,CAAY,EAC/CL,EAAS,iBAAiB,QAASM,CAAe,EAElD,eAAeD,EAAaE,EAAG,CAQ3B,GAPAA,EAAE,eAAc,EAEhBR,EAAU,UAAY,GAEtBE,EAAO,EAETG,EAAaN,EAAQ,SAAS,MAAM,MAAM,KAAI,EACxCM,EACA,GAAI,CACA,MAAMI,EAAO,MAAM7B,EAAWyB,EAAYH,CAAI,EAChDC,EAAU,KAAK,KAAKM,EAAK,UAAYL,CAAQ,EAC3C,MAAMM,EAASb,EAAeY,EAAK,IAAI,EACvCT,EAAU,UAAYU,EACN,IAAIC,EAAe,cAAc,EACzC,QAAO,CAClB,OAAQC,EAAK,CACV,QAAQ,IAAIA,CAAG,EACdxB,EAAS,KAAK,CACf,QAAS,2EACT,QAAS,IACT,SAAU,WACV,MAAO,KACnB,CAAS,CACA,CAGPW,EAAQ,MAAK,EACbc,GAEF,CAEA,eAAeN,GAAkB,CAE/BL,GAAQ,EACN,GAAI,CACA,MAAMO,EAAO,MAAM7B,EAAWyB,EAAYH,CAAI,EACxCQ,EAASb,EAAeY,EAAK,IAAI,EACzCT,EAAU,mBAAmB,YAAaU,CAAM,EAChC,IAAIC,EAAe,cAAc,EACnC,QAAO,CACxB,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAEDE,IAEAD,IACAE,GACF,CAIA,SAASF,GAAiB,CACpBX,GAAQC,EACRF,EAAS,MAAM,QAAU,OAEzBA,EAAS,MAAM,QAAU,OAE/B,CAEA,SAASc,GAAU,CACbb,GAAQC,GACVf,EAAS,KAAK,CACN,QAAS,6DACT,QAAS,IACT,SAAU,WACV,MAAO,OACnB,CAAQ,CAER,CAEA,SAAS0B,GAAW,CAClB,MAAME,EAAShB,EAAU,WAAW,sBAAqB,EAAG,OAE5D,SAAS,CACP,IAAKgB,EAAO,EACZ,SAAU,QACd,CAAG,CACH"}